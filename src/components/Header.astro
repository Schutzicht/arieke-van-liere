---
import Button from './ui/Button.astro';
import LanguageSwitch from './LanguageSwitch.astro';
import AccessibilityWidget from './AccessibilityWidget.astro';

const { lang = 'nl' } = Astro.props;

const navItems = lang === 'en' ? [
  { name: 'Home', href: '/en' },
  { name: 'Event Host', href: '#dagvoorzitter' },
  { name: 'Contact', href: '#contact' },
] : [
  { name: 'Home', href: '/' },
  { name: 'Dagvoorzitter', href: '#dagvoorzitter' },
  { name: 'Contact', href: '#contact' },
];
---

<header class="fixed w-full top-4 z-50 transition-all duration-300 pointer-events-none" id="main-header">
  <div class="container-custom flex items-center justify-center">
    <div class="bg-white/80 backdrop-blur-xl shadow-lg border border-white/20 rounded-full px-8 py-3 pointer-events-auto flex items-center gap-12 w-auto transition-all duration-300" id="nav-container">
      <a href="/" class="block w-28 text-black shrink-0 filter brightness-0">
        <img src="/assets/images/logo-full.svg" alt="Arieke van Liere" class="w-full h-auto" />
      </a>

      <nav class="hidden md:flex items-center gap-6 text-sm">
        {navItems.map(item => (
          <a 
            href={item.href} 
            class="text-gray-800 hover:text-brand-pink font-medium transition-colors"
          >
            {item.name}
          </a>
        ))}
        
        <div class="border-l border-gray-200 h-6 mx-2"></div>
        <AccessibilityWidget />
        <LanguageSwitch />
        
        <Button href="#contact" variant="primary" class="!py-2 !px-5 text-xs uppercase tracking-wide">
          {lang === 'en' ? 'Collaborate' : 'Samenwerken'}
        </Button>
      </nav>

      <!-- Mobile Menu Button -->
      <button class="md:hidden text-gray-800 p-2 pointer-events-auto" aria-label="Menu" id="mobile-menu-btn">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu Overlay -->
  <div class="fixed inset-0 bg-white z-40 transform translate-x-full transition-transform duration-300 md:hidden flex flex-col items-center justify-center gap-8 pointer-events-auto" id="mobile-menu">
     <button class="absolute top-6 right-6 p-2" id="close-menu-btn">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
    
    {navItems.map(item => (
      <a href={item.href} class="text-2xl font-medium text-gray-800 hover:text-brand-pink">
        {item.name}
      </a>
    ))}

    <div class="flex items-center gap-6 mt-4">
        <AccessibilityWidget />
        <LanguageSwitch />
    </div>

    <Button href="#contact" variant="primary" class="!py-2 !px-6 text-sm uppercase tracking-wide">
        {lang === 'en' ? 'Collaborate' : 'Samenwerken'}
    </Button>
  </div>
</header>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const closeBtn = document.getElementById('close-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');

  function toggleMenu() {
    mobileMenu?.classList.toggle('translate-x-full');
    document.body.classList.toggle('overflow-hidden');
  }

  menuBtn?.addEventListener('click', toggleMenu);
  closeBtn?.addEventListener('click', toggleMenu);
  
  // Close menu on link click
  mobileMenu?.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', toggleMenu);
  });
</script>
